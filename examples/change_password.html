<!DOCTYPE html>

<head>
    <script src="https://broadwayinc.dev/jslib/skapi/latest/skapi.js"></script>
</head>

<body>
    <h1>Change Password</h1>
    <form onsubmit='skapi.changePassword(event, { onerror:(err)=>alert(err) })' action="profile.html">
        <label for="current_password">Current password</label>
        <br>
        <input id='current_password' type="password" name="current_password">
        <br>
        <br>
        <label for="new_password">New password</label>
        <br>
        <input id="new_password" type="password" name="new_password">
        <br>
        <br>
        <input type="submit">
    </form>
</body>
<script>
    let skapi = new Skapi('service_id', 'owners_id', { autoLogin: true });

    skapi.getProfile().then(user => {
        if (user === null) {
            // user is not logged in!
            // redirect to login page.
            return window.location.replace("login.html");
        }
    });
</script>